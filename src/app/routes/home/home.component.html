<div id="app-home" *ngIf="{ locations: locations$ | async, locationsVisible: locationsVisible$ | async } as route">
  <app-api-state [state]="route.locations">
    <div class="container-fluid py-2">
      <form class="form-inline" id="formLocations" [formGroup]="formLocations">
        <div class="btn-group">
          <div class="btn btn-primary btn-sm " (click)="heatMap = true" [ngClass]="{ active: heatMap }">
            <i class="fa fa-thermometer-full" aria-hidden="true"></i> Heatmap
          </div>
          <div class="btn btn-primary btn-sm" (click)="heatMap = false" [ngClass]="{ active: !heatMap }">
            <i class="fa fa-map-pin" aria-hidden="true"></i> Pins
          </div>
        </div>
        <div class="form-group mx-sm-3">
          <label for="zip" class="mr-2">Zip</label>
          <input type="text" class="form-control form-control-sm" id="zip" placeholder="" formControlName="zip" />
        </div>

        <div class="form-group mx-sm-3">
          <label for="priceLow" class="mr-2">Price Range</label>
          <input
            type="text"
            class="form-control form-control-sm"
            id="priceLow"
            placeholder=""
            formControlName="priceLow"
          />
          <span class="px-2">-</span>
          <input
            type="text"
            class="form-control form-control-sm"
            id="priceHigh"
            placeholder=""
            formControlName="priceHigh"
          />
        </div>
        <button class="btn btn-primary btn-sm mr-0" (click)="locationsUpdate()">Update!</button>
      </form>
    </div>
    <div style="height: calc(100vh - 123px);">
      <!-- [pushPinIcon]="'https://www.bingmapsportal.com/Content/images/poi_custom.png'" -->
      <app-map
        [locations]="route?.locationsVisible"
        [heatmap]="heatMap"
        [disablePanning]="false"
        [disableZoom]="false"
        [disableDashboard]="false"
        [disableLocateMeButton]="true"
        [disableMapTypeSelector]="true"
        [pushPinsAddable]="false"
      >
      </app-map>
    </div>
  </app-api-state>
</div>
